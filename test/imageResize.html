<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>imageResize</title>
</head>
<body>
    <script>
        var sizes = {
            height: 50,
            width:50
        };
        addCanvasWithImage('../public/images/logo.png', sizes);

        function addCanvasWithImage(src, sizes) {
            getImageData(src, sizes)
                .then(drawImage);
        }


        function getImageData(src, sizes) {
            var img = new Image();
            img.style.display = "none";
            return new Promise(function (resolve) {
                img.onload = function(){
                    testCtx = createCanvas(img.naturalWidth, img.naturalHeight).getContext('2d');
                    testCtx.drawImage(img, 0, 0);
                    var imgData = testCtx.getImageData(0, 0, img.naturalWidth, img.naturalHeight);
                    delete  testCtx;
                    resolve({imgData:imgData, sizes:sizes});
                };
                img.src = src;
            });
        }

        function drawImage(imgData) {
            var canvas = createCanvas(imgData.width, imgData.height);
            document.body.appendChild(canvas);
            canvas.getContext('2d').putImageData(imgData, 0, 0);
            return canvas;
        }

        function createCanvas(canvasWidth, canvasHeight) {
            var canvas = document.createElement('canvas');
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;
            return canvas;
        }


    </script>
</body>
</html>